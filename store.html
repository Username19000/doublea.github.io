<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Double A SMP - Store</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@400;600;700&family=Space+Mono:wght@400;700&display=swap" rel="stylesheet">
  
  <!-- Tebex Checkout SDK -->
  <script src="https://js.tebex.io/v/2.0.0"></script>
  
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    :root {
      --primary: #01a1a4;
      --primary-dark: #007f81;
      --secondary: #f2b841;
      --dark: #0f172a;
      --dark-light: #1e293b;
      --text: #f8fafc;
      --text-muted: #94a3b8;
      --border: #334155;
      --success: #10b981;
      --font-display: 'Outfit', sans-serif;
      --font-mono: 'Space Mono', monospace;
    }

    body {
      font-family: var(--font-display);
      background: var(--dark);
      color: var(--text);
      line-height: 1.6;
    }

    .container {
      max-width: 1400px;
      margin: 0 auto;
      padding: 0 2rem;
    }

    .navbar {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      background: rgba(15, 23, 42, 0.95);
      backdrop-filter: blur(12px);
      border-bottom: 1px solid var(--border);
      z-index: 1000;
    }

    .nav-container {
      max-width: 1400px;
      margin: 0 auto;
      padding: 1rem 2rem;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .nav-logo {
      display: flex;
      align-items: center;
      gap: 0.75rem;
      font-weight: 700;
      font-size: 1.25rem;
      color: var(--text);
      text-decoration: none;
    }

    .nav-links {
      display: flex;
      list-style: none;
      gap: 2rem;
    }

    .nav-links a {
      color: var(--text-muted);
      text-decoration: none;
      font-weight: 500;
      transition: color 0.3s ease;
    }

    .nav-links a:hover, .nav-links a.active {
      color: var(--text);
    }

    .store-hero {
      padding: 8rem 2rem 4rem;
      text-align: center;
      position: relative;
    }

    .store-hero::before {
      content: '';
      position: absolute;
      inset: 0;
      background: radial-gradient(circle at 50% 50%, rgba(1, 161, 164, 0.15) 0%, transparent 70%);
    }

    .store-hero-content {
      position: relative;
      z-index: 1;
      max-width: 900px;
      margin: 0 auto;
    }

    .store-badge {
      display: inline-block;
      padding: 0.5rem 1.25rem;
      background: rgba(1, 161, 164, 0.1);
      border: 1px solid rgba(1, 161, 164, 0.3);
      border-radius: 50px;
      color: var(--primary);
      font-size: 0.875rem;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 1px;
      margin-bottom: 1.5rem;
    }

    .store-hero h1 {
      font-size: clamp(2.5rem, 6vw, 4rem);
      font-weight: 700;
      margin-bottom: 1rem;
      background: linear-gradient(135deg, var(--primary), var(--secondary));
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }

    .store-hero p {
      font-size: 1.25rem;
      color: var(--text-muted);
    }

    .category-nav {
      background: var(--dark-light);
      border-bottom: 1px solid var(--border);
      padding: 1.5rem 0;
      position: sticky;
      top: 73px;
      z-index: 999;
    }

    .category-list {
      display: flex;
      gap: 1rem;
      list-style: none;
      overflow-x: auto;
      padding: 0 2rem;
      max-width: 1400px;
      margin: 0 auto;
    }

    .category-item {
      padding: 0.75rem 1.5rem;
      background: var(--dark);
      border: 1px solid var(--border);
      border-radius: 8px;
      color: var(--text-muted);
      text-decoration: none;
      white-space: nowrap;
      font-weight: 600;
      transition: all 0.3s ease;
      cursor: pointer;
    }

    .category-item:hover, .category-item.active {
      background: var(--primary);
      border-color: var(--primary);
      color: white;
      transform: translateY(-2px);
    }

    .products-section {
      padding: 4rem 2rem;
    }

    .section-title {
      font-size: 2rem;
      font-weight: 700;
      margin-bottom: 0.5rem;
      text-align: center;
    }

    .section-subtitle {
      color: var(--text-muted);
      text-align: center;
      margin-bottom: 3rem;
      font-size: 1.125rem;
    }

    .products-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
      gap: 1.5rem;
      margin-bottom: 4rem;
    }

    .product-card {
      background: var(--dark-light);
      border: 2px solid var(--border);
      border-radius: 12px;
      padding: 1.5rem;
      transition: all 0.3s ease;
      cursor: pointer;
      position: relative;
      overflow: hidden;
    }

    .product-card::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 3px;
      background: linear-gradient(90deg, var(--primary), var(--secondary));
      transform: scaleX(0);
      transition: transform 0.3s ease;
    }

    .product-card:hover::before {
      transform: scaleX(1);
    }

    .product-card:hover {
      transform: translateY(-4px);
      border-color: var(--primary);
      box-shadow: 0 12px 30px rgba(0, 0, 0, 0.4);
    }

    .product-icon {
      font-size: 3rem;
      text-align: center;
      margin-bottom: 1rem;
    }

    .product-badge {
      display: inline-block;
      padding: 0.25rem 0.75rem;
      background: rgba(1, 161, 164, 0.15);
      border: 1px solid var(--primary);
      border-radius: 50px;
      color: var(--primary);
      font-size: 0.75rem;
      font-weight: 700;
      text-transform: uppercase;
      letter-spacing: 0.5px;
      margin-bottom: 0.75rem;
    }

    .product-badge.popular {
      background: rgba(242, 184, 65, 0.15);
      border-color: var(--secondary);
      color: var(--secondary);
    }

    .product-badge.premium {
      background: rgba(147, 51, 234, 0.15);
      border-color: #9333ea;
      color: #a855f7;
    }

    .product-title {
      font-size: 1.5rem;
      font-weight: 700;
      margin-bottom: 0.5rem;
      text-align: center;
    }

    .product-price {
      font-size: 1.75rem;
      font-weight: 700;
      color: var(--primary);
      text-align: center;
      margin-bottom: 0.25rem;
      font-family: var(--font-mono);
    }

    .product-price-sub {
      font-size: 0.875rem;
      color: var(--text-muted);
      text-align: center;
      margin-bottom: 1rem;
    }

    .product-description {
      color: var(--text-muted);
      text-align: center;
      font-size: 0.95rem;
      line-height: 1.5;
    }

    .view-details-text {
      text-align: center;
      color: var(--primary);
      font-weight: 600;
      font-size: 0.875rem;
      margin-top: 1rem;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 0.5rem;
    }

    .modal-overlay {
      display: none;
      position: fixed;
      inset: 0;
      background: rgba(0, 0, 0, 0.8);
      backdrop-filter: blur(4px);
      z-index: 2000;
      animation: fadeIn 0.3s ease;
    }

    .modal-overlay.active {
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 2rem;
    }

    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }

    .modal-content {
      background: var(--dark-light);
      border: 2px solid var(--border);
      border-radius: 16px;
      max-width: 700px;
      width: 100%;
      max-height: 90vh;
      overflow-y: auto;
      position: relative;
      animation: slideUp 0.3s ease;
    }

    @keyframes slideUp {
      from { opacity: 0; transform: translateY(30px); }
      to { opacity: 1; transform: translateY(0); }
    }

    .modal-header {
      padding: 2rem;
      border-bottom: 1px solid var(--border);
      position: relative;
    }

    .modal-close {
      position: absolute;
      top: 1.5rem;
      right: 1.5rem;
      background: transparent;
      border: none;
      color: var(--text-muted);
      font-size: 2rem;
      cursor: pointer;
      transition: all 0.3s ease;
      line-height: 1;
      width: 40px;
      height: 40px;
      display: flex;
      align-items: center;
      justify-content: center;
      border-radius: 8px;
    }

    .modal-close:hover {
      color: var(--text);
      background: var(--border);
    }

    .modal-icon {
      font-size: 4rem;
      text-align: center;
      margin-bottom: 1rem;
    }

    .modal-title {
      font-size: 2rem;
      font-weight: 700;
      text-align: center;
      margin-bottom: 0.5rem;
    }

    .modal-price {
      font-size: 2rem;
      font-weight: 700;
      color: var(--primary);
      text-align: center;
      font-family: var(--font-mono);
      margin-bottom: 0.5rem;
    }

    .modal-price-subtitle {
      color: var(--text-muted);
      text-align: center;
      font-size: 0.95rem;
    }

    .modal-body {
      padding: 2rem;
    }

    .perk-section {
      margin-bottom: 2rem;
    }

    .perk-section:last-child {
      margin-bottom: 0;
    }

    .perk-section-title {
      font-size: 1.25rem;
      font-weight: 700;
      margin-bottom: 1rem;
      color: var(--primary);
    }

    .perk-list {
      list-style: none;
    }

    .perk-list li {
      padding: 0.75rem 0;
      border-bottom: 1px solid var(--border);
      display: flex;
      align-items: flex-start;
      gap: 0.75rem;
      color: var(--text-muted);
    }

    .perk-list li:last-child {
      border-bottom: none;
    }

    .perk-icon {
      color: var(--success);
      font-weight: bold;
      flex-shrink: 0;
    }

    .modal-footer {
      padding: 2rem;
      border-top: 1px solid var(--border);
      display: flex;
      gap: 1rem;
      flex-direction: column;
    }

    .button-group {
      display: flex;
      gap: 1rem;
    }

    .buy-btn {
      flex: 1;
      padding: 1rem;
      background: var(--primary);
      color: white;
      border: none;
      border-radius: 8px;
      font-weight: 700;
      font-size: 1rem;
      cursor: pointer;
      transition: all 0.3s ease;
      text-transform: uppercase;
      letter-spacing: 1px;
    }

    .buy-btn:hover {
      background: var(--primary-dark);
      transform: translateY(-2px);
      box-shadow: 0 8px 20px rgba(1, 161, 164, 0.4);
    }

    .buy-btn.subscription {
      background: var(--secondary);
    }

    .buy-btn.subscription:hover {
      background: #d4a135;
    }

    .btn-label {
      font-size: 0.75rem;
      text-transform: none;
      opacity: 0.9;
      display: block;
      margin-bottom: 0.25rem;
    }

    .footer {
      padding: 3rem 0;
      border-top: 1px solid var(--border);
      margin-top: 4rem;
    }

    .footer-content {
      text-align: center;
    }

    .footer-brand {
      display: inline-flex;
      align-items: center;
      gap: 0.75rem;
      font-size: 1.25rem;
      font-weight: 700;
      margin-bottom: 1rem;
    }

    .footer-text {
      color: var(--text-muted);
    }

    @media (max-width: 768px) {
      .nav-links { display: none; }
      .store-hero { padding: 6rem 1rem 3rem; }
      .products-grid { grid-template-columns: 1fr; }
      .button-group { flex-direction: column; }
    }

    .modal-content::-webkit-scrollbar {
      width: 10px;
    }

    .modal-content::-webkit-scrollbar-track {
      background: var(--dark);
    }

    .modal-content::-webkit-scrollbar-thumb {
      background: var(--primary);
      border-radius: 5px;
    }
  </style>
</head>

<body>
  <nav class="navbar">
    <div class="nav-container">
      <a href="index.html" class="nav-logo">
        <img src="AA_Logo.png" alt="Logo" style="height: 32px;">
        <span>Double A SMP</span>
      </a>
      <ul class="nav-links">
        <li><a href="index.html">Home</a></li>
        <li><a href="rules.html">Rules</a></li>
        <li><a href="guides.html">Guides</a></li>
        <li><a href="changelog.html">Changelog</a></li>
        <li><a href="#" class="active">Store</a></li>
      </ul>
    </div>
  </nav>

  <section class="store-hero">
    <div class="store-hero-content">
      <div class="store-badge">‚ú® Support the Server</div>
      <h1>Server Store</h1>
      <p>Unlock exclusive ranks and perks to enhance your Double A SMP experience</p>
    </div>
  </section>

  <nav class="category-nav">
    <ul class="category-list">
      <li><a href="#ranks" class="category-item active">üéñÔ∏è Ranks</a></li>
      <li><a href="#crates" class="category-item">üì¶ Crates</a></li>
      <li><a href="#cosmetics" class="category-item">‚ú® Cosmetics</a></li>
    </ul>
  </nav>

  <main class="container">
    <section id="ranks" class="products-section">
      <h2 class="section-title">Server Ranks</h2>
      <p class="section-subtitle">Click any rank to view full details and perks</p>
      <div class="products-grid" id="ranks-grid"></div>
    </section>

    <section id="crates" class="products-section">
      <h2 class="section-title">Crate Keys</h2>
      <p class="section-subtitle">Try your luck with exciting rewards</p>
      <div class="products-grid" id="crates-grid"></div>
    </section>

    <section id="cosmetics" class="products-section">
      <h2 class="section-title">Cosmetics & Utilities</h2>
      <p class="section-subtitle">Stand out and boost your gameplay</p>
      <div class="products-grid" id="cosmetics-grid"></div>
    </section>
  </main>

  <div class="modal-overlay" id="modal">
    <div class="modal-content">
      <div class="modal-header">
        <button class="modal-close" onclick="closeModal()">&times;</button>
        <div class="modal-icon" id="modal-icon"></div>
        <h2 class="modal-title" id="modal-title"></h2>
        <div class="modal-price" id="modal-price"></div>
        <div class="modal-price-subtitle" id="modal-price-subtitle"></div>
      </div>
      <div class="modal-body" id="modal-body"></div>
      <div class="modal-footer" id="modal-footer"></div>
    </div>
  </div>

  <footer class="footer">
    <div class="container">
      <div class="footer-content">
        <div class="footer-brand">
          <img src="AA_Logo.png" alt="Logo" style="height: 32px;">
          <span>Double A SMP</span>
        </div>
        <p class="footer-text">Support the server and unlock exclusive perks</p>
      </div>
    </div>
  </footer>

  <script>
    // ========================================
    // CONFIGURATION - REPLACE WITH YOUR TEBEX IDs
    // ========================================
    const TEBEX_CONFIG = {
      webstoreIdentifier: 'double-a-smp-store', // Get this from your Tebex dashboard
      
      ranks: [
        {
          name: 'Resident',
          icon: 'üå±',
          badge: 'Starter',
          badgeClass: '',
          price: '$5.00',
          priceSubtitle: 'One-time purchase',
          description: 'Start your journey with essential perks',
          packageId: '7235170', // Replace with actual Tebex package ID
          subscriptionId: null,
          inGamePerks: [
            '[Resident] prefix in chat and tab list',
            'Access to /hat to put any item/block on your head',
            'Access to /tpahere to bring players to you',
            'Access to all animation commands to sit, lie, or crawl anywhere',
            'Ability to set up to 3 homes',
            'Ability to set up to 7 shops',
            'Ability to lock up to 15 blocks/entities',
            'Ability to be a member of up to 5 lands',
            'Ability to claim up to 15 chunks in your land to start',
            'Ability to have up to 25 members in your land',
            'Ability to have up to 7 areas in your land',
            'Ability to have up to 9 roles in your land',
            'Grant 7 additional claimable chunks to each land you are in'
          ],
          discordPerks: [
            'Resident hoisted Discord role',
            'Access VIP Chat',
            'Access VIP Lounge',
            'Access Leaks channel',
            'Access to priority support',
            'Ability to screenshare',
            'Ability to send images in #general'
          ]
        },
        {
          name: 'Merchant',
          icon: 'üí∞',
          badge: 'Popular',
          badgeClass: 'popular',
          price: '$10.00',
          priceSubtitle: 'One-time purchase',
          description: 'Expand your business with enhanced trading perks',
          packageId: 'MERCHANT_PACKAGE_ID',
          subscriptionId: null,
          inGamePerks: [
            'All Resident perks',
            '[Merchant] prefix',
            '/back command',
            '5 total homes',
            '25 chunk claims',
            'Green chat name',
            '10 shops',
            'Lock 25 blocks'
          ],
          discordPerks: [
            'All Resident Discord perks',
            'Merchant Discord role'
          ]
        },
        {
          name: 'Pioneer',
          icon: '‚öîÔ∏è',
          badge: 'Premium',
          badgeClass: 'premium',
          price: '$30 or $8/mo',
          priceSubtitle: 'One-time OR monthly subscription',
          description: 'Forge ahead with premium features',
          packageId: 'PIONEER_ONETIME_ID',
          subscriptionId: 'PIONEER_SUB_ID',
          inGamePerks: [
            'All Merchant perks',
            'Weekly kit with crate key',
            '/workbench command',
            '10 total homes',
            '50 chunk claims',
            'Custom chat formatting',
            '/nick command'
          ],
          discordPerks: [
            'All Merchant Discord perks',
            'Pioneer exclusive channels'
          ]
        },
        {
          name: 'Guardian',
          icon: 'üõ°Ô∏è',
          badge: 'Premium',
          badgeClass: 'premium',
          price: '$45 or $12/mo',
          priceSubtitle: 'One-time OR monthly subscription',
          description: 'Enhanced survival perks',
          packageId: 'GUARDIAN_ONETIME_ID',
          subscriptionId: 'GUARDIAN_SUB_ID',
          inGamePerks: [
            'All Pioneer perks',
            'Keep XP on death',
            '20 total homes',
            '75 chunk claims',
            'Particle effects',
            'Priority queue'
          ],
          discordPerks: [
            'All Pioneer Discord perks',
            'Priority support'
          ]
        },
        {
          name: 'Sovereign',
          icon: 'üëë',
          badge: 'Premium',
          badgeClass: 'premium',
          price: '$60 or $16/mo',
          priceSubtitle: 'One-time OR monthly subscription',
          description: 'Rule your domain',
          packageId: 'SOVEREIGN_ONETIME_ID',
          subscriptionId: 'SOVEREIGN_SUB_ID',
          inGamePerks: [
            'All Guardian perks',
            'Keep inventory on death',
            '35 total homes',
            '100 chunk claims',
            '/fly in claimed land',
            'Custom item names',
            'Cosmetic pets'
          ],
          discordPerks: [
            'All Guardian Discord perks',
            'Direct admin access'
          ]
        },
        {
          name: 'Overlord',
          icon: '‚ö°',
          badge: 'Ultimate',
          badgeClass: 'premium',
          price: '$75 or $20/mo',
          priceSubtitle: 'One-time OR monthly subscription',
          description: 'The pinnacle of power',
          packageId: 'OVERLORD_ONETIME_ID',
          subscriptionId: 'OVERLORD_SUB_ID',
          inGamePerks: [
            'All Sovereign perks',
            'Unlimited homes',
            '150 chunk claims',
            '/fly everywhere',
            'Custom join/quit messages',
            'All cosmetics'
          ],
          discordPerks: [
            'All Sovereign Discord perks',
            'Owner access',
            'Vote on features'
          ]
        }
      ],
      
      crates: [
        { name: 'Common Crate Key', icon: 'üì¶', price: '$2.50', description: 'Basic resources and small chance at rare items', packageId: 'COMMON_CRATE_ID' },
        { name: 'Rare Crate Key', icon: 'üíé', price: '$5.00', description: 'Enchanted gear and valuable resources', packageId: 'RARE_CRATE_ID' },
        { name: 'Legendary Crate Key', icon: '‚≠ê', price: '$10.00', description: 'Ultimate rewards and rare spawners', packageId: 'LEGENDARY_CRATE_ID' }
      ],
      
      cosmetics: [
        { name: 'Particle Pack', icon: '‚ú®', price: '$3.00', description: '5 unique particle effects', packageId: 'PARTICLE_ID' },
        { name: 'Cosmetic Pet', icon: 'üêæ', price: '$5.00', description: 'Loyal companion', packageId: 'PET_ID' },
        { name: '$10k Money', icon: 'üíµ', price: '$5.00', description: 'Instant cash injection', packageId: 'MONEY_ID' }
      ]
    };

    // Initialize Tebex
    if (typeof Tebex !== 'undefined') {
      Tebex.checkout.init({ ident: TEBEX_CONFIG.webstoreIdentifier });
    }

    // Render functions
    function renderRanks() {
      const grid = document.getElementById('ranks-grid');
      grid.innerHTML = TEBEX_CONFIG.ranks.map(rank => `
        <div class="product-card" onclick="openRankModal('${rank.name}')">
          ${rank.badge ? `<span class="product-badge ${rank.badgeClass}">${rank.badge}</span>` : ''}
          <div class="product-icon">${rank.icon}</div>
          <h3 class="product-title">${rank.name}</h3>
          <div class="product-price">${rank.price}</div>
          <p class="product-price-sub">${rank.priceSubtitle}</p>
          <p class="product-description">${rank.description}</p>
          <div class="view-details-text">View Full Details ‚Üí</div>
        </div>
      `).join('');
    }

    function renderCrates() {
      const grid = document.getElementById('crates-grid');
      grid.innerHTML = TEBEX_CONFIG.crates.map(c => `
        <div class="product-card" onclick="buyItem('${c.packageId}')">
          <div class="product-icon">${c.icon}</div>
          <h3 class="product-title">${c.name}</h3>
          <div class="product-price">${c.price}</div>
          <p class="product-description">${c.description}</p>
          <div class="view-details-text">Purchase ‚Üí</div>
        </div>
      `).join('');
    }

    function renderCosmetics() {
      const grid = document.getElementById('cosmetics-grid');
      grid.innerHTML = TEBEX_CONFIG.cosmetics.map(c => `
        <div class="product-card" onclick="buyItem('${c.packageId}')">
          <div class="product-icon">${c.icon}</div>
          <h3 class="product-title">${c.name}</h3>
          <div class="product-price">${c.price}</div>
          <p class="product-description">${c.description}</p>
          <div class="view-details-text">Purchase ‚Üí</div>
        </div>
      `).join('');
    }

    function openRankModal(rankName) {
      const rank = TEBEX_CONFIG.ranks.find(r => r.name === rankName);
      if (!rank) return;

      document.getElementById('modal-icon').textContent = rank.icon;
      document.getElementById('modal-title').textContent = rank.name;
      document.getElementById('modal-price').textContent = rank.price;
      document.getElementById('modal-price-subtitle').textContent = rank.priceSubtitle;

      let perksHtml = '';
      if (rank.inGamePerks?.length) {
        perksHtml += `
          <div class="perk-section">
            <h3 class="perk-section-title">In-Game Perks</h3>
            <ul class="perk-list">
              ${rank.inGamePerks.map(p => `<li><span class="perk-icon">‚úì</span><span>${p}</span></li>`).join('')}
            </ul>
          </div>
        `;
      }

      if (rank.discordPerks?.length) {
        perksHtml += `
          <div class="perk-section">
            <h3 class="perk-section-title">Discord Perks</h3>
            <ul class="perk-list">
              ${rank.discordPerks.map(p => `<li><span class="perk-icon">‚úì</span><span>${p}</span></li>`).join('')}
            </ul>
          </div>
        `;
      }

      document.getElementById('modal-body').innerHTML = perksHtml;

      let footerHtml = '';
      if (rank.subscriptionId) {
        footerHtml = `
          <div class="button-group">
            <button class="buy-btn" onclick="buyItem('${rank.packageId}')">
              <span class="btn-label">One-Time</span>
              ${rank.price.split(' or ')[0]}
            </button>
            <button class="buy-btn subscription" onclick="buyItem('${rank.subscriptionId}')">
              <span class="btn-label">Subscription</span>
              ${rank.price.split(' or ')[1] || 'Subscribe'}
            </button>
          </div>
        `;
      } else {
        footerHtml = `<button class="buy-btn" onclick="buyItem('${rank.packageId}')">Purchase ${rank.price}</button>`;
      }

      document.getElementById('modal-footer').innerHTML = footerHtml;
      document.getElementById('modal').classList.add('active');
    }

    function closeModal() {
      document.getElementById('modal').classList.remove('active');
    }

    function buyItem(packageId) {
      if (packageId.includes('_ID')) {
        alert('Please replace package IDs in the configuration with your actual Tebex package IDs.');
        return;
      }
      
      if (typeof Tebex !== 'undefined') {
        Tebex.checkout.init({ ident: TEBEX_CONFIG.webstoreIdentifier });
        Tebex.checkout.open({
          package: packageId
        });
      } else {
        alert('Tebex SDK not loaded. Please check your connection.');
      }
    }

    // Click outside modal to close
    document.getElementById('modal').addEventListener('click', function(e) {
      if (e.target === this) closeModal();
    });

    // Initialize
    renderRanks();
    renderCrates();
    renderCosmetics();

    // Smooth scroll
    document.querySelectorAll('.category-item').forEach(item => {
      item.addEventListener('click', function(e) {
        e.preventDefault();
        const target = document.querySelector(this.getAttribute('href'));
        if (target) {
          target.scrollIntoView({ behavior: 'smooth', block: 'start' });
          document.querySelectorAll('.category-item').forEach(c => c.classList.remove('active'));
          this.classList.add('active');
        }
      });
    });
  </script>
</body>
</html>